<div class="space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-700">
  <header>
    <h1 class="text-3xl font-black dark:text-white tracking-tighter uppercase italic tracking-widest">SQUAD MANAGEMENT</h1>
    <p class="text-slate-500 dark:text-slate-400 font-medium tracking-tight">Monitoring 4 active neural processors in high-availability mode.</p>
  </header>

  <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
    <div *ngFor="let agent of agents()" 
         class="glass rounded-[2.5rem] border border-slate-200 dark:border-white/5 p-10 flex flex-col gap-8 hover:scale-[1.01] transition-all relative overflow-hidden group">
      
      <!-- Status Badge -->
      <div class="absolute top-0 right-0 p-6">
        <div [class]="'flex items-center gap-2 px-3 py-1 rounded-full ' + (agent.is_online ? 'bg-green-500/10' : 'bg-red-500/10')">
          <span [class]="'w-1.5 h-1.5 rounded-full ' + (agent.is_online ? 'bg-green-500 animate-pulse' : 'bg-red-500')"></span>
          <span [class]="'text-[10px] font-black uppercase tracking-widest ' + (agent.is_online ? 'text-green-500' : 'text-red-500')">
            {{ agent.is_online ? 'Active' : 'Offline' }}
          </span>
        </div>
      </div>

      <!-- Agent Info -->
      <div class="flex gap-6 items-center">
        <div [class]="'w-20 h-20 rounded-3xl flex items-center justify-center text-4xl shadow-inner transition-colors ' + 
                     (agent.agent_id === 'claw' ? 'bg-indigo-500/10 group-hover:bg-indigo-500/20' : 
                      agent.agent_id === 'bar' ? 'bg-orange-500/10 group-hover:bg-orange-500/20' : 
                      agent.agent_id === 'noma' ? 'bg-blue-500/10 group-hover:bg-blue-500/20' : 
                      'bg-emerald-500/10 group-hover:bg-emerald-500/20')">
          {{agent.emoji}}
        </div>
        <div>
          <h2 class="text-2xl font-black dark:text-white tracking-tight italic">{{agent.name}}</h2>
          <p [class]="'text-[10px] font-bold uppercase tracking-[0.3em] ' + 
                     (agent.agent_id === 'claw' ? 'text-indigo-500' : 
                      agent.agent_id === 'bar' ? 'text-orange-500' : 
                      agent.agent_id === 'noma' ? 'text-blue-500' : 
                      'text-emerald-500')">
            {{agent.role}}
          </p>
        </div>
      </div>

      <!-- Metrics -->
      <div class="grid grid-cols-2 gap-4">
        <div class="p-6 rounded-[1.5rem] bg-slate-100/50 dark:bg-white/[0.03] border border-transparent dark:border-white/5 space-y-1">
          <p class="text-[9px] font-black text-slate-400 dark:text-slate-500 tracking-widest uppercase italic">Neural Core</p>
          <p class="text-sm font-black dark:text-slate-200 italic truncate uppercase tracking-tighter">{{agent.model}}</p>
        </div>
        <div class="p-6 rounded-[1.5rem] bg-slate-100/50 dark:bg-white/[0.03] border border-transparent dark:border-white/5 space-y-1">
          <p class="text-[9px] font-black text-slate-400 dark:text-slate-500 tracking-widest uppercase italic">Status</p>
          <p class="text-sm font-black dark:text-slate-200 italic uppercase tracking-tighter">{{ agent.latency || agent.stack || agent.focus || agent.schedule || 'Operational' }}</p>
        </div>
      </div>

      <!-- Load Bar -->
      <div class="space-y-3">
        <div class="flex justify-between text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">
          <span>System Load</span>
          <span>{{agent.load || '0%'}}</span>
        </div>
        <div class="w-full h-1.5 bg-slate-100 dark:bg-white/5 rounded-full overflow-hidden">
          <div [class]="'h-full transition-all duration-1000 ' + 
                       (agent.agent_id === 'claw' ? 'bg-indigo-500 w-0' : 
                        agent.agent_id === 'bar' ? 'bg-orange-500 w-[85%] animate-pulse' : 
                        agent.agent_id === 'noma' ? 'bg-blue-500 w-0' : 
                        'bg-emerald-500 w-full')"
               [style.width]="(agent.load === 'READY' || agent.load === 'OPTIMAL') ? '0%' : ((agent.load && agent.load.includes('/')) ? '0%' : (agent.load || '0%'))">
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="flex gap-3 pt-2">
        <button [class]="'flex-1 py-4 rounded-2xl text-white text-[10px] font-black uppercase tracking-widest hover:brightness-110 active:scale-95 transition-all shadow-lg ' + 
                         (agent.agent_id === 'claw' ? 'bg-indigo-500 shadow-indigo-500/20' : 
                          agent.agent_id === 'bar' ? 'bg-orange-500 shadow-orange-500/20' : 
                          agent.agent_id === 'noma' ? 'bg-blue-500 shadow-blue-500/20' : 
                          'bg-emerald-500 shadow-emerald-500/20')">
          Access Protocol
        </button>
        <button class="px-8 py-4 rounded-2xl border border-slate-200 dark:border-white/10 dark:text-slate-300 text-[10px] font-black uppercase tracking-widest hover:bg-slate-50 dark:hover:bg-white/5 transition-all">Skills</button>
      </div>
    </div>
  </div>
</div>
